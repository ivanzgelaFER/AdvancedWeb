<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>LAB5_PWA</title>

        <link rel="stylesheet" href="./site.css" />
        <link rel="manifest" href="./manifest.json" />
    </head>

    <body>
        <div>
            <nav class="navbar">
                <div class="intranet-btn-user">
                    <button class="navbar-homepage-btn">
                        <a href="./index.html">Početna stranica</a>
                    </button>
                </div>
                <div class="navbar-end-container">
                    <div class="intranet-container"><button class="intranet-btn"><a href="/intranet.html">Intranet</a></button></div>
                    <div class="intranet-btn-user"><div><p>Ivan</p></div></div>
                </div>
            </nav>
            <div class="intranet-container">
                <div>
                    <h2>Preddiplomski studij završen!</h2>
                    <h5>Trenutno nema ponuđenih predmeta, rasporeda i ostalih opcija</h5>
                    <p>Ako želite upisati diplomski studij unesite tražene podatke</p>
                </div>
                <div class="form-container-desing">
                    <h3>Upis na diplomski studij</h3>
                    <form action="/">
                        <div class="image-container">
                            <img src="./slike_za_upis/1.jpg" alt="dama">
                        </div>
                        <div class="intranet-form-container">
                            <div>
                                <label for="ime">Ime:</label><br>
                                <input type="text" id="ime" name="ime" value=""><br>
                            </div>
                            <div>
                                <label for="prezime">Prezime:</label><br>
                                <input type="text" id="prezime" name="prezime" value=""><br>
                            </div>
                            <div>
                                <label for="oib">OIB:</label><br>
                                <input type="text" id="oib" name="oib" value=""><br>
                            </div>
                            <div>
                                <label for="email">Email:</label><br>
                                <input type="text" id="email" name="email" value="">
                            </div>
                            <div>
                                <label for="drzavljanstvo">Državljanstvo:</label><br>
                                <input type="text" id="drzavljanstvo" name="drzavljanstvo" value=""><br>
                            </div>
                            <div>
                                <label for="narodnost">Narodnost:</label><br>
                                <input type="text" id="narodnost" name="narodnost" value="">
                            </div>
                        </div>
                        <div class="submit-btn">
                            <button>Submit</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="gallery">
                <div class="img-gal">
                    <h1>Galerija slika</h1>
                </div>
                <div class="studio-container">
                    <button class="studio-btn">
                        <a href="/photo_studio.html">
                            Odlazak u studio za fotografiranje
                        </a>
                    </button>
                </div>
                <div id="snaps" class="iksica-imgs-container">
                    <template id="snapTemplate">
                      <div class="img-container-card">
                        <div>
                            <img class="img-container-card-img" src="tbd"/>
                            <div class="img-title">
                                <h3>title</h3>
                            </div>
                        </div>
                      </div>
                    </template>
                </div>
            </div>
        </div>
        <script>
            navigator.serviceWorker.register('./sw.js', {type: 'module'})
                .then(reg => console.log('SW registered!', reg))
                .catch(err => console.error('Error registering service worker', err));
            fetch("/snaps")
                .then((res) => {
                console.log("res", res)
                if (res.ok) {
                    res.json()
                    .then((data) => {
                    console.log("data", data)
                    data.files.forEach((fileName) => {
                        console.log("appending", fileName)
                        let snapsDiv = document.querySelector("#snaps");
                        let template = document.querySelector('#snapTemplate');
                        var clone = template.content.cloneNode(true);
                        let img = clone.querySelector("img");
                        img.src = "/uploads/" + fileName;
                        let title = clone.querySelector("h3");
                        title.textContent = fileName.substring(24).replaceAll("_", " ").replaceAll(".png", "");
                        snapsDiv.appendChild(clone);
                    });
                    })
                }
            }).catch(err => {
                console.log(err);
            })           
        </script>
    </body>
</html>
